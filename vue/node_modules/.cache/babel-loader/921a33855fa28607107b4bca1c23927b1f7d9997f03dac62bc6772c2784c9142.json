{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = n => (_pushScopeId(\"data-v-9ea40744\"), n = n(), _popScopeId(), n);\nvar _hoisted_1 = {\n  class: \"w-full h-full\"\n};\nvar _hoisted_2 = {\n  class: \"flex flex-col items-center px-5\"\n};\nvar _hoisted_3 = {\n  class: \"text-decor text-rotate text-3xl\"\n};\nvar _hoisted_4 = {\n  class: \"text-decor text-rotate text-3xl\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_van_icon = _resolveComponent(\"van-icon\");\n  var _component_van_nav_bar = _resolveComponent(\"van-nav-bar\");\n  var _component_van_button = _resolveComponent(\"van-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_van_nav_bar, {\n    onClickRight: $setup.onClickRight\n  }, {\n    right: _withCtx(() => [_createVNode(_component_van_icon, {\n      name: \"setting\",\n      size: \"30\"\n    })]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"div\", _hoisted_2, [_createVNode($setup[\"CalendarComponent\"], {\n    attributes: $setup.attributes,\n    currentDate: $setup.currentDate,\n    onClick: $setup.dayClick\n  }, null, 8 /* PROPS */, [\"attributes\", \"currentDate\"]), _createVNode(_component_van_button, {\n    icon: \"edit\",\n    round: \"\",\n    type: \"primary\",\n    class: \"mb-2\",\n    to: {\n      name: 'CalendarView'\n    }\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Change days\")]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"div\", {\n    class: \"w-48 h-48 bg-yellow-300 flex flex-col items-center justify-center\",\n    onClick: $setup.onClickActiveDay\n  }, [_createElementVNode(\"p\", _hoisted_3, _toDisplayString($setup.activeDay), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_4, _toDisplayString(_ctx.$t('buttons.add_note')), 1 /* TEXT */)]), _createVNode($setup[\"NotesList\"], {\n    note: $setup.note\n  }, null, 8 /* PROPS */, [\"note\"])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_van_nav_bar","onClickRight","$setup","right","_withCtx","_component_van_icon","name","size","_createElementVNode","_hoisted_2","attributes","currentDate","onClick","dayClick","_component_van_button","icon","round","type","to","onClickActiveDay","_hoisted_3","_toDisplayString","activeDay","_hoisted_4","_ctx","$t","note"],"sources":["D:\\working\\wmn-calendar.itserve.es\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\r\n\t<div class=\"w-full h-full\">\r\n\t\t<van-nav-bar @click-right=\"onClickRight\">\r\n\t\t\t<template #right>\r\n\t\t\t\t<van-icon name=\"setting\" size=\"30\" />\r\n\t\t\t</template>\r\n\t\t</van-nav-bar>\r\n\t\t<div class=\"flex flex-col items-center px-5\">\r\n\t\t\t<CalendarComponent\r\n\t\t\t\t:attributes=\"attributes\"\r\n\t\t\t\t:currentDate=\"currentDate\"\r\n\t\t\t\t@click=\"dayClick\"\r\n\t\t\t/>\r\n\t\t\t<van-button\r\n\t\t\t\ticon=\"edit\"\r\n\t\t\t\tround\r\n\t\t\t\ttype=\"primary\"\r\n\t\t\t\tclass=\"mb-2\"\r\n\t\t\t\t:to=\"{ name: 'CalendarView' }\"\r\n\t\t\t\t>Change days</van-button\r\n\t\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclass=\"w-48 h-48 bg-yellow-300 flex flex-col items-center justify-center\"\r\n\t\t\t\t@click=\"onClickActiveDay\"\r\n\t\t\t>\r\n\t\t\t\t<p class=\"text-decor text-rotate text-3xl\">{{ activeDay }}</p>\r\n\t\t\t\t<p class=\"text-decor text-rotate text-3xl\">\r\n\t\t\t\t\t{{ $t('buttons.add_note') }}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t<NotesList :note=\"note\" />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script setup>\r\nimport CalendarComponent from '@/components/template/CalendarComponent.vue';\r\nimport NotesList from '@/components/template/NotesList.vue';\r\nimport { computed, ref } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { useStore } from 'vuex';\r\n\r\nconst store = useStore();\r\nconst router = useRouter();\r\n\r\nconst currentDate = new Date(formatter(new Date()));\r\nconst calendar = computed(() => store.state.Auth.calendar);\r\nconsole.log(calendar.value);\r\nconst notesArr = computed(() => store.state.Auth.notesArr);\r\nconst note = computed(() => store.state.Auth.notes);\r\n\r\nconst attributes = ref(getAttrs(calendar.value, notesArr.value, currentDate));\r\nconst activeDay = ref(store.state.Auth.notes.date);\r\n\r\nconst patternNote = {\r\n\tdate: null,\r\n\tsexual_act_protected: null,\r\n\tsexual_act_unprotected: null,\r\n\torgasm: null,\r\n\tpills: null,\r\n\tnotes: null,\r\n\tsymptoms: null,\r\n\ttemperature: null,\r\n\tweight: null,\r\n\twater: 0,\r\n\tmood: null,\r\n};\r\n\r\nfunction dayClick(day) {\r\n\tif (!(new Date(day.id).getTime() > currentDate.getTime())) {\r\n\t\tactiveDay.value = day.id;\r\n\t\tlet j = doesHaveNote(notesArr.value, day.id);\r\n\t\tif (j == -1) {\r\n\t\t\tstore.dispatch('Auth/setNotes', patternNote);\r\n\t\t} else {\r\n\t\t\tstore.dispatch('Auth/setNotes', notesArr.value[j]);\r\n\t\t}\r\n\t\tstore.dispatch('Auth/setActiveDay', day.id);\r\n\t} else {\r\n\t\tactiveDay.value = null;\r\n\t\tstore.dispatch('Auth/setActiveDay', null);\r\n\t\tstore.dispatch('Auth/setNotes', patternNote);\r\n\t}\r\n\tattributes.value = getAttrs(calendar.value, notesArr.value, currentDate);\r\n}\r\n\r\nfunction getAttrs(arr1, arr2, date) {\r\n\tlet dates = arr1.map(elem => {\r\n\t\tlet fillMode = 'solid';\r\n\t\tif (new Date(elem.period_date).getTime() > date.getTime()) {\r\n\t\t\tfillMode = 'light';\r\n\t\t}\r\n\t\treturn {\r\n\t\t\thighlight: {\r\n\t\t\t\tcolor: 'product-pink',\r\n\t\t\t\tfillMode: fillMode,\r\n\t\t\t},\r\n\t\t\tdates: new Date(elem.period_date),\r\n\t\t};\r\n\t});\r\n\r\n\tlet redNotes = arr2.map(elem => {\r\n\t\tif (\r\n\t\t\telem.sexual_act_protected ||\r\n\t\t\telem.sexual_act_unprotected ||\r\n\t\t\telem.symptoms\r\n\t\t) {\r\n\t\t\treturn {\r\n\t\t\t\tdot: {\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: 'red',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdates: [new Date(elem.date)],\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n\r\n\tlet grayNotes = arr2.map(elem => {\r\n\t\tif (elem.pills || elem.temperature) {\r\n\t\t\treturn {\r\n\t\t\t\tdot: {\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: 'gray',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdates: [new Date(elem.date)],\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n\r\n\tlet blueNotes = arr2.map(elem => {\r\n\t\tif (elem.weight || elem.water) {\r\n\t\t\treturn {\r\n\t\t\t\tdot: {\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: 'blue',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdates: [new Date(elem.date)],\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n\r\n\tlet yellowNotes = arr2.map(elem => {\r\n\t\tif (elem.notes || elem.mood) {\r\n\t\t\treturn {\r\n\t\t\t\tdot: {\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: 'yellow',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdates: [new Date(elem.date)],\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n\treturn [...dates, ...redNotes, ...grayNotes, ...blueNotes, ...yellowNotes];\r\n}\r\n\r\nfunction doesHaveNote(arr, date) {\r\n\tlet flag = -1;\r\n\tfor (let i = 0; i < arr.length; i++) {\r\n\t\tif (arr[i].date == date) {\r\n\t\t\tflag = i;\r\n\t\t}\r\n\t}\r\n\treturn flag;\r\n}\r\n\r\nfunction onClickActiveDay() {\r\n\tif (activeDay.value) {\r\n\t\trouter.push({ name: 'NotesView' });\r\n\t}\r\n}\r\n\r\nfunction onClickRight() {\r\n\trouter.push({ name: 'SettingsView' });\r\n}\r\n\r\nfunction formatter(date) {\r\n\treturn `${date.getFullYear()}-${addZero(date.getMonth() + 1)}-${addZero(\r\n\t\tdate.getDate()\r\n\t)}`;\r\n}\r\nfunction addZero(num) {\r\n\treturn num < 9 ? `0${num}` : num;\r\n}\r\n</script>\r\n<style scoped>\r\n.van-nav-bar {\r\n\tbackground: transparent;\r\n}\r\n</style>\r\n"],"mappings":";;;EACMA,KAAK,EAAC;AAAe;;EAMpBA,KAAK,EAAC;AAAiC;;EAkBvCA,KAAK,EAAC;AAAiC;;EACvCA,KAAK,EAAC;AAAiC;;;;;uBAzB7CC,mBAAA,CA+BM,OA/BNC,UA+BM,GA9BLC,YAAA,CAIcC,sBAAA;IAJAC,YAAW,EAAEC,MAAA,CAAAD;EAAY;IAC3BE,KAAK,EAAAC,QAAA,CACf,MAAqC,CAArCL,YAAA,CAAqCM,mBAAA;MAA3BC,IAAI,EAAC,SAAS;MAACC,IAAI,EAAC;;;MAGhCC,mBAAA,CAwBM,OAxBNC,UAwBM,GAvBLV,YAAA,CAIEG,MAAA;IAHAQ,UAAU,EAAER,MAAA,CAAAQ,UAAU;IACtBC,WAAW,EAAET,MAAA,CAAAS,WAAW;IACxBC,OAAK,EAAEV,MAAA,CAAAW;0DAETd,YAAA,CAOCe,qBAAA;IANAC,IAAI,EAAC,MAAM;IACXC,KAAK,EAAL,EAAK;IACLC,IAAI,EAAC,SAAS;IACdrB,KAAK,EAAC,MAAM;IACXsB,EAAE,EAAE;MAAAZ,IAAA;IAAA;;sBACJ,MAAW,C,iBAAX,aAAW,E;;MAEbE,mBAAA,CAQM;IAPLZ,KAAK,EAAC,mEAAmE;IACxEgB,OAAK,EAAEV,MAAA,CAAAiB;MAERX,mBAAA,CAA8D,KAA9DY,UAA8D,EAAAC,gBAAA,CAAhBnB,MAAA,CAAAoB,SAAS,kBACvDd,mBAAA,CAEI,KAFJe,UAEI,EAAAF,gBAAA,CADAG,IAAA,CAAAC,EAAE,qC,GAGP1B,YAAA,CAA0BG,MAAA;IAAdwB,IAAI,EAAExB,MAAA,CAAAwB;EAAI,kC"},"metadata":{},"sourceType":"module","externalDependencies":[]}