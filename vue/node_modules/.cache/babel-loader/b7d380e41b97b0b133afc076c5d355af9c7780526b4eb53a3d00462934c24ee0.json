{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport CalendarComponent from '@/components/CalendarComponent.vue';\nimport secondaryFunctions from '@/mixins/secondary-functions';\nimport calendarFunctions from '@/mixins/calendar-functions';\nimport { ref } from 'vue';\nimport { computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'CalendarView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    var store = useStore();\n    var router = useRouter();\n    var currentDate = new Date(secondaryFunctions.methods.formatter(new Date()));\n    var calendar = computed(() => store.state.Auth.calendar);\n    var ovulation = computed(() => store.state.Auth.ovulation);\n    var fertileDates = computed(() => store.state.Auth.fertileDates);\n    var attributes = ref(calendarFunctions.methods.getAttrs(calendar.value, ovulation.value, fertileDates.value, currentDate));\n    var activeDay = ref(store.state.Auth.notes.date);\n    function dayClick(day) {\n      if (!(new Date(day.id).getTime() > currentDate.getTime())) {\n        activeDay.value = day.id;\n        var i = calendarFunctions.methods.doesHaveDate(calendar.value, day.id);\n        if (i == -1) {\n          calendar.value.push({\n            date: day.id\n          });\n        } else {\n          calendar.value.splice(i, 1);\n        }\n        store.dispatch('Auth/setActiveDay', day.id);\n      } else {\n        activeDay.value = null;\n        store.dispatch('Auth/setActiveDay', null);\n        store.dispatch('Auth/setNotes', patternNote);\n      }\n      attributes.value = calendarFunctions.methods.getAttrs(calendar.value, ovulation.value, fertileDates.value, currentDate);\n      calendar.value = calendar.value.sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\n      console.log(calendar.value);\n      // store.dispatch('Auth/updateCalendar', calendar.value);\n    }\n\n    function onClickLeft() {\n      router.back();\n    }\n    function onClickRight() {\n      router.push({\n        name: 'SettingsView'\n      });\n    }\n    var __returned__ = {\n      store,\n      router,\n      currentDate,\n      calendar,\n      ovulation,\n      fertileDates,\n      attributes,\n      activeDay,\n      dayClick,\n      onClickLeft,\n      onClickRight,\n      CalendarComponent,\n      get secondaryFunctions() {\n        return secondaryFunctions;\n      },\n      get calendarFunctions() {\n        return calendarFunctions;\n      },\n      ref,\n      computed,\n      get useRouter() {\n        return useRouter;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["CalendarComponent","secondaryFunctions","calendarFunctions","ref","computed","useRouter","useStore","store","router","currentDate","Date","methods","formatter","calendar","state","Auth","ovulation","fertileDates","attributes","getAttrs","value","activeDay","notes","date","dayClick","day","id","getTime","i","doesHaveDate","push","splice","dispatch","patternNote","sort","a","b","console","log","onClickLeft","back","onClickRight","name"],"sources":["D:/working/wmn-calendar.itserve.es/src/views/CalendarView.vue"],"sourcesContent":["<template>\r\n\t<div class=\"w-full h-full\">\r\n\t\t<van-nav-bar\r\n\t\t\tleft-arrow\r\n\t\t\t:left-text=\"$t('buttons.go_back')\"\r\n\t\t\t@click-left=\"onClickLeft\"\r\n\t\t\t@click-right=\"onClickRight\"\r\n\t\t>\r\n\t\t\t<template #right>\r\n\t\t\t\t<van-icon name=\"setting\" size=\"30\" />\r\n\t\t\t</template>\r\n\t\t</van-nav-bar>\r\n\t\t<div class=\"flex flex-col items-center px-5\">\r\n\t\t\t<CalendarComponent\r\n\t\t\t\t:rows=\"2\"\r\n\t\t\t\t:attributes=\"attributes\"\r\n\t\t\t\t:currentDate=\"currentDate\"\r\n\t\t\t\t@click=\"dayClick\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\nimport CalendarComponent from '@/components/CalendarComponent.vue';\r\nimport secondaryFunctions from '@/mixins/secondary-functions';\r\nimport calendarFunctions from '@/mixins/calendar-functions';\r\nimport { ref } from 'vue';\r\nimport { computed } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { useStore } from 'vuex';\r\n\r\nconst store = useStore();\r\nconst router = useRouter();\r\nconst currentDate = new Date(secondaryFunctions.methods.formatter(new Date()));\r\nconst calendar = computed(() => store.state.Auth.calendar);\r\nconst ovulation = computed(() => store.state.Auth.ovulation);\r\nconst fertileDates = computed(() => store.state.Auth.fertileDates);\r\n\r\nconst attributes = ref(\r\n\tcalendarFunctions.methods.getAttrs(\r\n\t\tcalendar.value,\r\n\t\tovulation.value,\r\n\t\tfertileDates.value,\r\n\t\tcurrentDate\r\n\t)\r\n);\r\nconst activeDay = ref(store.state.Auth.notes.date);\r\n\r\nfunction dayClick(day) {\r\n\tif (!(new Date(day.id).getTime() > currentDate.getTime())) {\r\n\t\tactiveDay.value = day.id;\r\n\t\tlet i = calendarFunctions.methods.doesHaveDate(calendar.value, day.id);\r\n\t\tif (i == -1) {\r\n\t\t\tcalendar.value.push({ date: day.id });\r\n\t\t} else {\r\n\t\t\tcalendar.value.splice(i, 1);\r\n\t\t}\r\n\t\tstore.dispatch('Auth/setActiveDay', day.id);\r\n\t} else {\r\n\t\tactiveDay.value = null;\r\n\t\tstore.dispatch('Auth/setActiveDay', null);\r\n\t\tstore.dispatch('Auth/setNotes', patternNote);\r\n\t}\r\n\tattributes.value = calendarFunctions.methods.getAttrs(\r\n\t\tcalendar.value,\r\n\t\tovulation.value,\r\n\t\tfertileDates.value,\r\n\t\tcurrentDate\r\n\t);\r\n\tcalendar.value = calendar.value.sort(\r\n\t\t(a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()\r\n\t);\r\n\tconsole.log(calendar.value);\r\n\t// store.dispatch('Auth/updateCalendar', calendar.value);\r\n}\r\n\r\nfunction onClickLeft() {\r\n\trouter.back();\r\n}\r\n\r\nfunction onClickRight() {\r\n\trouter.push({ name: 'SettingsView' });\r\n}\r\n</script>\r\n\r\n<style></style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}