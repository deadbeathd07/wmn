{"ast":null,"code":"import appBridge from '@/mixins/app-bridge';\nimport { computed, ref, watch } from 'vue';\nimport { useStore } from 'vuex';\nimport secondaryFunctions from '@/mixins/secondary-functions';\nexport default {\n  __name: 'QuestionsComponent',\n  props: {\n    to: String,\n    questions: Object,\n    answers: Object,\n    entry: Number,\n    currentDate: Object\n  },\n  emits: ['onSubmit'],\n  setup(__props, {\n    expose: __expose,\n    emit: emits\n  }) {\n    __expose();\n    var {\n      questions,\n      answers,\n      entry,\n      currentDate\n    } = __props;\n    var store = useStore();\n    var locale = computed(() => store.state.Auth.locale);\n    var answers_model = ref(answers);\n    watch(locale, (newLocale, oldLocale) => {\n      store.dispatch('Auth/getQuestions', newLocale);\n    });\n    var currentDateBirth = ref(answers.birth_date.split('-'));\n    var currentDatePeriod = ref(answers.last_period_date.split('-'));\n    var selectedValueCycle = ref([answers.duration_cycle_last]);\n    var selectedValuePeriod = ref([answers.duration_period_last]);\n    var showPickerCycle = ref(false);\n    var showPickerPeriod = ref(false);\n    var showPickerDate = ref(false);\n    var showPickerBirthDate = ref(false);\n    var minDate = new Date(currentDate.getFullYear() - 70, 0, 1);\n    var maxDate = currentDate;\n    var columns = secondaryFunctions.methods.getColumn(1, 31);\n    function onConfirmCycle({\n      selectedOptions\n    }) {\n      answers_model.value.duration_cycle_last = selectedOptions[0]?.text;\n      showPickerCycle.value = false;\n    }\n    function onConfirmPeriod({\n      selectedOptions\n    }) {\n      answers_model.value.duration_period_last = selectedOptions[0]?.text;\n      showPickerPeriod.value = false;\n    }\n    function onConfirmDate({\n      selectedValues\n    }) {\n      answers_model.value.last_period_date = selectedValues.join('-');\n      showPickerDate.value = false;\n    }\n    function onConfirmBirthDate({\n      selectedValues\n    }) {\n      answers_model.value.birth_date = selectedValues.join('-');\n      showPickerBirthDate.value = false;\n    }\n    var __returned__ = {\n      emits,\n      store,\n      locale,\n      answers_model,\n      currentDateBirth,\n      currentDatePeriod,\n      selectedValueCycle,\n      selectedValuePeriod,\n      showPickerCycle,\n      showPickerPeriod,\n      showPickerDate,\n      showPickerBirthDate,\n      minDate,\n      maxDate,\n      columns,\n      onConfirmCycle,\n      onConfirmPeriod,\n      onConfirmDate,\n      onConfirmBirthDate,\n      get appBridge() {\n        return appBridge;\n      },\n      computed,\n      ref,\n      watch,\n      get useStore() {\n        return useStore;\n      },\n      get secondaryFunctions() {\n        return secondaryFunctions;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["appBridge","computed","ref","watch","useStore","secondaryFunctions","store","locale","state","Auth","answers_model","answers","newLocale","oldLocale","dispatch","currentDateBirth","birth_date","split","currentDatePeriod","last_period_date","selectedValueCycle","duration_cycle_last","selectedValuePeriod","duration_period_last","showPickerCycle","showPickerPeriod","showPickerDate","showPickerBirthDate","minDate","Date","currentDate","getFullYear","maxDate","columns","methods","getColumn","onConfirmCycle","selectedOptions","value","text","onConfirmPeriod","onConfirmDate","selectedValues","join","onConfirmBirthDate"],"sources":["D:/github-deadbeat/wmn-calendar.itserve.es/src/components/QuestionsComponent.vue"],"sourcesContent":["<template>\r\n\t<div class=\"h-full bg-white w-full px-4\">\r\n\t\t<van-form @submit=\"emits('onSubmit', answers_model)\">\r\n\t\t\t<van-cell-group inset>\r\n\t\t\t\t<van-field\r\n\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\tlabel-align=\"top\"\r\n\t\t\t\t\t:placeholder=\"$t('placeholders.entryName')\"\r\n\t\t\t\t\t:label=\"questions.name\"\r\n\t\t\t\t\tv-model=\"answers_model.name\"\r\n\t\t\t\t\t:rules=\"[\r\n\t\t\t\t\t\t{ required: true, message: $t('placeholders.requiredName') },\r\n\t\t\t\t\t]\"\r\n\t\t\t\t/>\r\n\t\t\t\t<van-field\r\n\t\t\t\t\tname=\"birth_date\"\r\n\t\t\t\t\tlabel-align=\"top\"\r\n\t\t\t\t\t:placeholder=\"$t('placeholders.selectDate')\"\r\n\t\t\t\t\t:label=\"questions.birth_date\"\r\n\t\t\t\t\tv-model=\"answers_model.birth_date\"\r\n\t\t\t\t\tis-link\r\n\t\t\t\t\treadonly\r\n\t\t\t\t\t:rules=\"[\r\n\t\t\t\t\t\t{ required: true, message: $t('placeholders.required_b_day') },\r\n\t\t\t\t\t]\"\r\n\t\t\t\t\t@click=\"showPickerBirthDate = true\"\r\n\t\t\t\t/>\r\n\t\t\t\t<van-popup v-model:show=\"showPickerBirthDate\" position=\"bottom\">\r\n\t\t\t\t\t<van-date-picker\r\n\t\t\t\t\t\t:min-date=\"minDate\"\r\n\t\t\t\t\t\t:max-date=\"maxDate\"\r\n\t\t\t\t\t\tv-model=\"currentDateBirth\"\r\n\t\t\t\t\t\t@confirm=\"onConfirmBirthDate\"\r\n\t\t\t\t\t\t@cancel=\"showPickerBirthDate = false\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</van-popup>\r\n\t\t\t\t<van-field\r\n\t\t\t\t\tv-model=\"answers_model.duration_cycle_last\"\r\n\t\t\t\t\tname=\"duration_cycle_last\"\r\n\t\t\t\t\t:label=\"questions.duration_cycle_last\"\r\n\t\t\t\t\tlabel-align=\"top\"\r\n\t\t\t\t\t:placeholder=\"$t('placeholders.selectNum')\"\r\n\t\t\t\t\t:rules=\"[\r\n\t\t\t\t\t\t{ required: true, message: $t('placeholders.required_cycle') },\r\n\t\t\t\t\t]\"\r\n\t\t\t\t\treadonly\r\n\t\t\t\t\tis-link\r\n\t\t\t\t\t@click=\"showPickerCycle = true\"\r\n\t\t\t\t/>\r\n\t\t\t\t<van-popup v-model:show=\"showPickerCycle\" position=\"bottom\">\r\n\t\t\t\t\t<van-picker\r\n\t\t\t\t\t\tv-model=\"selectedValueCycle\"\r\n\t\t\t\t\t\t:columns=\"columns\"\r\n\t\t\t\t\t\t@confirm=\"onConfirmCycle\"\r\n\t\t\t\t\t\t@cancel=\"showPickerCycle = false\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</van-popup>\r\n\t\t\t\t<van-field\r\n\t\t\t\t\tv-model=\"answers_model.duration_period_last\"\r\n\t\t\t\t\tname=\"duration_period_last\"\r\n\t\t\t\t\t:label=\"questions.duration_period_last\"\r\n\t\t\t\t\tlabel-align=\"top\"\r\n\t\t\t\t\t:placeholder=\"$t('placeholders.selectNum')\"\r\n\t\t\t\t\t:rules=\"[\r\n\t\t\t\t\t\t{ required: true, message: $t('placeholders.required_period') },\r\n\t\t\t\t\t]\"\r\n\t\t\t\t\treadonly\r\n\t\t\t\t\tis-link\r\n\t\t\t\t\t@click=\"showPickerPeriod = true\"\r\n\t\t\t\t/>\r\n\t\t\t\t<van-popup v-model:show=\"showPickerPeriod\" position=\"bottom\">\r\n\t\t\t\t\t<van-picker\r\n\t\t\t\t\t\tv-model=\"selectedValuePeriod\"\r\n\t\t\t\t\t\t:columns=\"columns\"\r\n\t\t\t\t\t\t@confirm=\"onConfirmPeriod\"\r\n\t\t\t\t\t\t@cancel=\"showPickerPeriod = false\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</van-popup>\r\n\t\t\t\t<template v-if=\"entry === 1\">\r\n\t\t\t\t\t<van-field\r\n\t\t\t\t\t\tv-model=\"answers_model.last_period_date\"\r\n\t\t\t\t\t\tname=\"last_period_date\"\r\n\t\t\t\t\t\t:label=\"questions.last_period_date\"\r\n\t\t\t\t\t\tlabel-align=\"top\"\r\n\t\t\t\t\t\t:placeholder=\"$t('placeholders.selectDate')\"\r\n\t\t\t\t\t\t:rules=\"[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: $t('placeholders.required_periodDate'),\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\treadonly\r\n\t\t\t\t\t\tis-link\r\n\t\t\t\t\t\t@click=\"showPickerDate = true\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<van-popup v-model:show=\"showPickerDate\" position=\"bottom\">\r\n\t\t\t\t\t\t<van-date-picker\r\n\t\t\t\t\t\t\tv-model=\"currentDatePeriod\"\r\n\t\t\t\t\t\t\t:min-date=\"minDate\"\r\n\t\t\t\t\t\t\t:max-date=\"maxDate\"\r\n\t\t\t\t\t\t\t@confirm=\"onConfirmDate\"\r\n\t\t\t\t\t\t\t@cancel=\"showPickerDate = false\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</van-popup>\r\n\t\t\t\t</template>\r\n\t\t\t</van-cell-group>\r\n\t\t\t<van-button type=\"primary\" native-type=\"submit\" size=\"large\" class=\"mt-4\">\r\n\t\t\t\t{{ $t('buttons.save') }}\r\n\t\t\t</van-button>\r\n\t\t</van-form>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\nimport appBridge from '@/mixins/app-bridge';\r\nimport { computed, ref, watch } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport secondaryFunctions from '@/mixins/secondary-functions';\r\n\r\nconst { questions, answers, entry, currentDate } = defineProps({\r\n\tto: String,\r\n\tquestions: Object,\r\n\tanswers: Object,\r\n\tentry: Number,\r\n\tcurrentDate: Object,\r\n});\r\n\r\nconst emits = defineEmits(['onSubmit']);\r\n\r\nconst store = useStore();\r\n\r\nconst locale = computed(() => store.state.Auth.locale);\r\n\r\nconst answers_model = ref(answers);\r\n\r\nwatch(locale, (newLocale, oldLocale) => {\r\n\tstore.dispatch('Auth/getQuestions', newLocale);\r\n});\r\n\r\nconst currentDateBirth = ref(answers.birth_date.split('-'));\r\nconst currentDatePeriod = ref(answers.last_period_date.split('-'));\r\nconst selectedValueCycle = ref([answers.duration_cycle_last]);\r\nconst selectedValuePeriod = ref([answers.duration_period_last]);\r\n\r\nconst showPickerCycle = ref(false);\r\nconst showPickerPeriod = ref(false);\r\nconst showPickerDate = ref(false);\r\nconst showPickerBirthDate = ref(false);\r\n\r\nconst minDate = new Date(currentDate.getFullYear() - 70, 0, 1);\r\nconst maxDate = currentDate;\r\n\r\nconst columns = secondaryFunctions.methods.getColumn(1, 31);\r\n\r\nfunction onConfirmCycle({ selectedOptions }) {\r\n\tanswers_model.value.duration_cycle_last = selectedOptions[0]?.text;\r\n\tshowPickerCycle.value = false;\r\n}\r\nfunction onConfirmPeriod({ selectedOptions }) {\r\n\tanswers_model.value.duration_period_last = selectedOptions[0]?.text;\r\n\tshowPickerPeriod.value = false;\r\n}\r\nfunction onConfirmDate({ selectedValues }) {\r\n\tanswers_model.value.last_period_date = selectedValues.join('-');\r\n\tshowPickerDate.value = false;\r\n}\r\n\r\nfunction onConfirmBirthDate({ selectedValues }) {\r\n\tanswers_model.value.birth_date = selectedValues.join('-');\r\n\tshowPickerBirthDate.value = false;\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.van-hairline-unset--top-bottom::after {\r\n\tborder-color: red;\r\n}\r\n</style>\r\n"],"mappings":"AAkHA,OAAOA,SAAS,MAAM,qBAAqB;AAC3C,SAASC,QAAQ,EAAEC,GAAG,EAAEC,KAAK,QAAQ,KAAK;AAC1C,SAASC,QAAQ,QAAQ,MAAM;AAC/B,OAAOC,kBAAkB,MAAM,8BAA8B;;;;;;;;;;;;;;;;;;;;;;IAY7D,IAAMC,KAAK,GAAGF,QAAQ,CAAC,CAAC;IAExB,IAAMG,MAAM,GAAGN,QAAQ,CAAC,MAAMK,KAAK,CAACE,KAAK,CAACC,IAAI,CAACF,MAAM,CAAC;IAEtD,IAAMG,aAAa,GAAGR,GAAG,CAACS,OAAO,CAAC;IAElCR,KAAK,CAACI,MAAM,EAAE,CAACK,SAAS,EAAEC,SAAS,KAAK;MACvCP,KAAK,CAACQ,QAAQ,CAAC,mBAAmB,EAAEF,SAAS,CAAC;IAC/C,CAAC,CAAC;IAEF,IAAMG,gBAAgB,GAAGb,GAAG,CAACS,OAAO,CAACK,UAAU,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC;IAC3D,IAAMC,iBAAiB,GAAGhB,GAAG,CAACS,OAAO,CAACQ,gBAAgB,CAACF,KAAK,CAAC,GAAG,CAAC,CAAC;IAClE,IAAMG,kBAAkB,GAAGlB,GAAG,CAAC,CAACS,OAAO,CAACU,mBAAmB,CAAC,CAAC;IAC7D,IAAMC,mBAAmB,GAAGpB,GAAG,CAAC,CAACS,OAAO,CAACY,oBAAoB,CAAC,CAAC;IAE/D,IAAMC,eAAe,GAAGtB,GAAG,CAAC,KAAK,CAAC;IAClC,IAAMuB,gBAAgB,GAAGvB,GAAG,CAAC,KAAK,CAAC;IACnC,IAAMwB,cAAc,GAAGxB,GAAG,CAAC,KAAK,CAAC;IACjC,IAAMyB,mBAAmB,GAAGzB,GAAG,CAAC,KAAK,CAAC;IAEtC,IAAM0B,OAAO,GAAG,IAAIC,IAAI,CAACC,WAAW,CAACC,WAAW,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;IAC9D,IAAMC,OAAO,GAAGF,WAAW;IAE3B,IAAMG,OAAO,GAAG5B,kBAAkB,CAAC6B,OAAO,CAACC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC;IAE3D,SAASC,cAAcA,CAAC;MAAEC;IAAgB,CAAC,EAAE;MAC5C3B,aAAa,CAAC4B,KAAK,CAACjB,mBAAmB,GAAGgB,eAAe,CAAC,CAAC,CAAC,EAAEE,IAAI;MAClEf,eAAe,CAACc,KAAK,GAAG,KAAK;IAC9B;IACA,SAASE,eAAeA,CAAC;MAAEH;IAAgB,CAAC,EAAE;MAC7C3B,aAAa,CAAC4B,KAAK,CAACf,oBAAoB,GAAGc,eAAe,CAAC,CAAC,CAAC,EAAEE,IAAI;MACnEd,gBAAgB,CAACa,KAAK,GAAG,KAAK;IAC/B;IACA,SAASG,aAAaA,CAAC;MAAEC;IAAe,CAAC,EAAE;MAC1ChC,aAAa,CAAC4B,KAAK,CAACnB,gBAAgB,GAAGuB,cAAc,CAACC,IAAI,CAAC,GAAG,CAAC;MAC/DjB,cAAc,CAACY,KAAK,GAAG,KAAK;IAC7B;IAEA,SAASM,kBAAkBA,CAAC;MAAEF;IAAe,CAAC,EAAE;MAC/ChC,aAAa,CAAC4B,KAAK,CAACtB,UAAU,GAAG0B,cAAc,CAACC,IAAI,CAAC,GAAG,CAAC;MACzDhB,mBAAmB,CAACW,KAAK,GAAG,KAAK;IAClC"},"metadata":{},"sourceType":"module","externalDependencies":[]}