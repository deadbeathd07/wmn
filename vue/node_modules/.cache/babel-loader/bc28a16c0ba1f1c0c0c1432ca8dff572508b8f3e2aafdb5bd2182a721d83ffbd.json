{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'CalendarView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    var store = useStore();\n    var router = useRouter();\n    var currentDate = new Date(formatter(new Date()));\n    var calendar = computed(() => store.state.Auth.calendar);\n    var attributes = ref(getAttrs(calendar.value, currentDate));\n    var activeDay = ref(store.state.Auth.notes.date);\n    function dayClick(day) {\n      if (!(new Date(day.id).getTime() > currentDate.getTime())) {\n        activeDay.value = day.id;\n        var i = doesHaveDay(calendar.value, day.id);\n        if (i == -1) {\n          calendar.value.push({\n            period_date: day.id\n          });\n        } else {\n          calendar.value.splice(i, 1);\n        }\n        store.dispatch('Auth/setActiveDay', day.id);\n      } else {\n        activeDay.value = null;\n        store.dispatch('Auth/setActiveDay', null);\n        store.dispatch('Auth/setNotes', patternNote);\n      }\n      attributes.value = getAttrs(calendar.value, currentDate);\n      store.dispatch('Auth/updateCalendar', calendar.value);\n    }\n    function getAttrs(arr1, date) {\n      var dates = arr1.map(elem => {\n        var fillMode = 'solid';\n        if (new Date(elem.period_date).getTime() > date.getTime()) {\n          fillMode = 'light';\n        }\n        return {\n          highlight: {\n            color: 'product-pink',\n            fillMode: fillMode\n          },\n          dates: new Date(elem.period_date)\n        };\n      });\n      return dates;\n    }\n    function doesHaveDay(arr, date) {\n      var flag = -1;\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i].period_date == date) {\n          flag = i;\n        }\n      }\n      return flag;\n    }\n    function onClickLeft() {\n      router.back();\n    }\n    function onClickRight() {\n      router.push({\n        name: 'SettingsView'\n      });\n    }\n    function formatter(date) {\n      return `${date.getFullYear()}-${addZero(date.getMonth() + 1)}-${addZero(date.getDate())}`;\n    }\n    function addZero(num) {\n      return num < 9 ? `0${num}` : num;\n    }\n    var __returned__ = {\n      store,\n      router,\n      currentDate,\n      calendar,\n      attributes,\n      activeDay,\n      dayClick,\n      getAttrs,\n      doesHaveDay,\n      onClickLeft,\n      onClickRight,\n      formatter,\n      addZero,\n      ref,\n      computed,\n      get useRouter() {\n        return useRouter;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","useRouter","useStore","store","router","currentDate","Date","formatter","calendar","state","Auth","attributes","getAttrs","value","activeDay","notes","date","dayClick","day","id","getTime","i","doesHaveDay","push","period_date","splice","dispatch","patternNote","arr1","dates","map","elem","fillMode","highlight","color","arr","flag","length","onClickLeft","back","onClickRight","name","getFullYear","addZero","getMonth","getDate","num"],"sources":["D:/working/wmn-calendar.itserve.es/src/views/CalendarView.vue"],"sourcesContent":["<template>\r\n\t<div class=\"w-full h-full\">\r\n\t\t<van-nav-bar\r\n\t\t\tleft-arrow\r\n\t\t\t:left-text=\"$t('buttons.go_back')\"\r\n\t\t\t@click-left=\"onClickLeft\"\r\n\t\t\t@click-right=\"onClickRight\"\r\n\t\t>\r\n\t\t\t<template #right>\r\n\t\t\t\t<van-icon name=\"setting\" size=\"30\" />\r\n\t\t\t</template>\r\n\t\t</van-nav-bar>\r\n\t\t<div class=\"flex flex-col items-center px-5\">\r\n\t\t\t<CalendarComponent\r\n\t\t\t\t:rows=\"2\"\r\n\t\t\t\t:attributes=\"attributes\"\r\n\t\t\t\t:currentDate=\"currentDate\"\r\n\t\t\t\t@click=\"dayClick\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { computed } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { useStore } from 'vuex';\r\n\r\nconst store = useStore();\r\nconst router = useRouter();\r\nconst currentDate = new Date(formatter(new Date()));\r\nconst calendar = computed(() => store.state.Auth.calendar);\r\n\r\nconst attributes = ref(getAttrs(calendar.value, currentDate));\r\nconst activeDay = ref(store.state.Auth.notes.date);\r\n\r\nfunction dayClick(day) {\r\n\tif (!(new Date(day.id).getTime() > currentDate.getTime())) {\r\n\t\tactiveDay.value = day.id;\r\n\t\tlet i = doesHaveDay(calendar.value, day.id);\r\n\t\tif (i == -1) {\r\n\t\t\tcalendar.value.push({ period_date: day.id });\r\n\t\t} else {\r\n\t\t\tcalendar.value.splice(i, 1);\r\n\t\t}\r\n\t\tstore.dispatch('Auth/setActiveDay', day.id);\r\n\t} else {\r\n\t\tactiveDay.value = null;\r\n\t\tstore.dispatch('Auth/setActiveDay', null);\r\n\t\tstore.dispatch('Auth/setNotes', patternNote);\r\n\t}\r\n\tattributes.value = getAttrs(calendar.value, currentDate);\r\n\tstore.dispatch('Auth/updateCalendar', calendar.value);\r\n}\r\n\r\nfunction getAttrs(arr1, date) {\r\n\tlet dates = arr1.map(elem => {\r\n\t\tlet fillMode = 'solid';\r\n\t\tif (new Date(elem.period_date).getTime() > date.getTime()) {\r\n\t\t\tfillMode = 'light';\r\n\t\t}\r\n\t\treturn {\r\n\t\t\thighlight: {\r\n\t\t\t\tcolor: 'product-pink',\r\n\t\t\t\tfillMode: fillMode,\r\n\t\t\t},\r\n\t\t\tdates: new Date(elem.period_date),\r\n\t\t};\r\n\t});\r\n\treturn dates;\r\n}\r\n\r\nfunction doesHaveDay(arr, date) {\r\n\tlet flag = -1;\r\n\tfor (let i = 0; i < arr.length; i++) {\r\n\t\tif (arr[i].period_date == date) {\r\n\t\t\tflag = i;\r\n\t\t}\r\n\t}\r\n\treturn flag;\r\n}\r\n\r\nfunction onClickLeft() {\r\n\trouter.back();\r\n}\r\n\r\nfunction onClickRight() {\r\n\trouter.push({ name: 'SettingsView' });\r\n}\r\n\r\nfunction formatter(date) {\r\n\treturn `${date.getFullYear()}-${addZero(date.getMonth() + 1)}-${addZero(\r\n\t\tdate.getDate()\r\n\t)}`;\r\n}\r\nfunction addZero(num) {\r\n\treturn num < 9 ? `0${num}` : num;\r\n}\r\n</script>\r\n\r\n<style></style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}