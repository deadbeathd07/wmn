{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport CalendarComponent from '@/components/template/CalendarComponent.vue';\nimport NotesList from '@/components/template/NotesList.vue';\nimport { computed, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'HomeView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    var store = useStore();\n    var router = useRouter();\n    var currentDate = new Date(formatter(new Date()));\n    var calendar = computed(() => store.state.Auth.calendar);\n    console.log(calendar.value);\n    var notesArr = computed(() => store.state.Auth.notesArr);\n    var note = computed(() => store.state.Auth.notes);\n    var attributes = ref(getAttrs(calendar.value, notesArr.value, currentDate));\n    var activeDay = ref(store.state.Auth.notes.date);\n    var patternNote = {\n      date: null,\n      sexual_act_protected: null,\n      sexual_act_unprotected: null,\n      orgasm: null,\n      pills: null,\n      notes: null,\n      symptoms: null,\n      temperature: null,\n      weight: null,\n      water: 0,\n      mood: null\n    };\n    function dayClick(day) {\n      if (!(new Date(day.id).getTime() > currentDate.getTime())) {\n        activeDay.value = day.id;\n        var j = doesHaveNote(notesArr.value, day.id);\n        if (j == -1) {\n          store.dispatch('Auth/setNotes', patternNote);\n        } else {\n          store.dispatch('Auth/setNotes', notesArr.value[j]);\n        }\n        store.dispatch('Auth/setActiveDay', day.id);\n      } else {\n        activeDay.value = null;\n        store.dispatch('Auth/setActiveDay', null);\n        store.dispatch('Auth/setNotes', patternNote);\n      }\n      attributes.value = getAttrs(calendar.value, notesArr.value, currentDate);\n    }\n    function getAttrs(arr1, arr2, date) {\n      var dates = arr1.map(elem => {\n        var fillMode = 'solid';\n        if (new Date(elem.period_date).getTime() > date.getTime()) {\n          fillMode = 'light';\n        }\n        return {\n          highlight: {\n            color: 'product-pink',\n            fillMode: fillMode\n          },\n          dates: new Date(elem.period_date)\n        };\n      });\n      var redNotes = arr2.map(elem => {\n        if (elem.sexual_act_protected || elem.sexual_act_unprotected || elem.symptoms) {\n          return {\n            dot: {\n              style: {\n                backgroundColor: 'red'\n              }\n            },\n            dates: [new Date(elem.date)]\n          };\n        }\n      });\n      var grayNotes = arr2.map(elem => {\n        if (elem.pills || elem.temperature) {\n          return {\n            dot: {\n              style: {\n                backgroundColor: 'gray'\n              }\n            },\n            dates: [new Date(elem.date)]\n          };\n        }\n      });\n      var blueNotes = arr2.map(elem => {\n        if (elem.weight || elem.water) {\n          return {\n            dot: {\n              style: {\n                backgroundColor: 'blue'\n              }\n            },\n            dates: [new Date(elem.date)]\n          };\n        }\n      });\n      var yellowNotes = arr2.map(elem => {\n        if (elem.notes || elem.mood) {\n          return {\n            dot: {\n              style: {\n                backgroundColor: 'yellow'\n              }\n            },\n            dates: [new Date(elem.date)]\n          };\n        }\n      });\n      return [...dates, ...redNotes, ...grayNotes, ...blueNotes, ...yellowNotes];\n    }\n    function doesHaveNote(arr, date) {\n      var flag = -1;\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i].date == date) {\n          flag = i;\n        }\n      }\n      return flag;\n    }\n    function onClickActiveDay() {\n      if (activeDay.value) {\n        router.push({\n          name: 'NotesView'\n        });\n      }\n    }\n    function onClickRight() {\n      router.push({\n        name: 'SettingsView'\n      });\n    }\n    function formatter(date) {\n      return `${date.getFullYear()}-${addZero(date.getMonth() + 1)}-${addZero(date.getDate())}`;\n    }\n    function addZero(num) {\n      return num < 9 ? `0${num}` : num;\n    }\n    var __returned__ = {\n      store,\n      router,\n      currentDate,\n      calendar,\n      notesArr,\n      note,\n      attributes,\n      activeDay,\n      patternNote,\n      dayClick,\n      getAttrs,\n      doesHaveNote,\n      onClickActiveDay,\n      onClickRight,\n      formatter,\n      addZero,\n      CalendarComponent,\n      NotesList,\n      computed,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["CalendarComponent","NotesList","computed","ref","useRouter","useStore","store","router","currentDate","Date","formatter","calendar","state","Auth","console","log","value","notesArr","note","notes","attributes","getAttrs","activeDay","date","patternNote","sexual_act_protected","sexual_act_unprotected","orgasm","pills","symptoms","temperature","weight","water","mood","dayClick","day","id","getTime","j","doesHaveNote","dispatch","arr1","arr2","dates","map","elem","fillMode","period_date","highlight","color","redNotes","dot","style","backgroundColor","grayNotes","blueNotes","yellowNotes","arr","flag","i","length","onClickActiveDay","push","name","onClickRight","getFullYear","addZero","getMonth","getDate","num"],"sources":["D:/working/wmn-calendar.itserve.es/src/views/HomeView.vue"],"sourcesContent":["<template>\r\n\t<div class=\"w-full h-full\">\r\n\t\t<van-nav-bar @click-right=\"onClickRight\">\r\n\t\t\t<template #right>\r\n\t\t\t\t<van-icon name=\"setting\" size=\"30\" />\r\n\t\t\t</template>\r\n\t\t</van-nav-bar>\r\n\t\t<div class=\"flex flex-col items-center px-5\">\r\n\t\t\t<CalendarComponent\r\n\t\t\t\t:attributes=\"attributes\"\r\n\t\t\t\t:currentDate=\"currentDate\"\r\n\t\t\t\t@click=\"dayClick\"\r\n\t\t\t/>\r\n\t\t\t<van-button\r\n\t\t\t\ticon=\"edit\"\r\n\t\t\t\tround\r\n\t\t\t\ttype=\"primary\"\r\n\t\t\t\tclass=\"mb-2\"\r\n\t\t\t\t:to=\"{ name: 'CalendarView' }\"\r\n\t\t\t\t>Change days</van-button\r\n\t\t\t>\r\n\t\t\t<div\r\n\t\t\t\tclass=\"w-48 h-48 bg-yellow-300 flex flex-col items-center justify-center\"\r\n\t\t\t\t@click=\"onClickActiveDay\"\r\n\t\t\t>\r\n\t\t\t\t<p class=\"text-decor text-rotate text-3xl\">{{ activeDay }}</p>\r\n\t\t\t\t<p class=\"text-decor text-rotate text-3xl\">\r\n\t\t\t\t\t{{ $t('buttons.add_note') }}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t<NotesList :note=\"note\" />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script setup>\r\nimport CalendarComponent from '@/components/template/CalendarComponent.vue';\r\nimport NotesList from '@/components/template/NotesList.vue';\r\nimport { computed, ref } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { useStore } from 'vuex';\r\n\r\nconst store = useStore();\r\nconst router = useRouter();\r\n\r\nconst currentDate = new Date(formatter(new Date()));\r\nconst calendar = computed(() => store.state.Auth.calendar);\r\nconsole.log(calendar.value);\r\nconst notesArr = computed(() => store.state.Auth.notesArr);\r\nconst note = computed(() => store.state.Auth.notes);\r\n\r\nconst attributes = ref(getAttrs(calendar.value, notesArr.value, currentDate));\r\nconst activeDay = ref(store.state.Auth.notes.date);\r\n\r\nconst patternNote = {\r\n\tdate: null,\r\n\tsexual_act_protected: null,\r\n\tsexual_act_unprotected: null,\r\n\torgasm: null,\r\n\tpills: null,\r\n\tnotes: null,\r\n\tsymptoms: null,\r\n\ttemperature: null,\r\n\tweight: null,\r\n\twater: 0,\r\n\tmood: null,\r\n};\r\n\r\nfunction dayClick(day) {\r\n\tif (!(new Date(day.id).getTime() > currentDate.getTime())) {\r\n\t\tactiveDay.value = day.id;\r\n\t\tlet j = doesHaveNote(notesArr.value, day.id);\r\n\t\tif (j == -1) {\r\n\t\t\tstore.dispatch('Auth/setNotes', patternNote);\r\n\t\t} else {\r\n\t\t\tstore.dispatch('Auth/setNotes', notesArr.value[j]);\r\n\t\t}\r\n\t\tstore.dispatch('Auth/setActiveDay', day.id);\r\n\t} else {\r\n\t\tactiveDay.value = null;\r\n\t\tstore.dispatch('Auth/setActiveDay', null);\r\n\t\tstore.dispatch('Auth/setNotes', patternNote);\r\n\t}\r\n\tattributes.value = getAttrs(calendar.value, notesArr.value, currentDate);\r\n}\r\n\r\nfunction getAttrs(arr1, arr2, date) {\r\n\tlet dates = arr1.map(elem => {\r\n\t\tlet fillMode = 'solid';\r\n\t\tif (new Date(elem.period_date).getTime() > date.getTime()) {\r\n\t\t\tfillMode = 'light';\r\n\t\t}\r\n\t\treturn {\r\n\t\t\thighlight: {\r\n\t\t\t\tcolor: 'product-pink',\r\n\t\t\t\tfillMode: fillMode,\r\n\t\t\t},\r\n\t\t\tdates: new Date(elem.period_date),\r\n\t\t};\r\n\t});\r\n\r\n\tlet redNotes = arr2.map(elem => {\r\n\t\tif (\r\n\t\t\telem.sexual_act_protected ||\r\n\t\t\telem.sexual_act_unprotected ||\r\n\t\t\telem.symptoms\r\n\t\t) {\r\n\t\t\treturn {\r\n\t\t\t\tdot: {\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: 'red',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdates: [new Date(elem.date)],\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n\r\n\tlet grayNotes = arr2.map(elem => {\r\n\t\tif (elem.pills || elem.temperature) {\r\n\t\t\treturn {\r\n\t\t\t\tdot: {\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: 'gray',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdates: [new Date(elem.date)],\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n\r\n\tlet blueNotes = arr2.map(elem => {\r\n\t\tif (elem.weight || elem.water) {\r\n\t\t\treturn {\r\n\t\t\t\tdot: {\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: 'blue',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdates: [new Date(elem.date)],\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n\r\n\tlet yellowNotes = arr2.map(elem => {\r\n\t\tif (elem.notes || elem.mood) {\r\n\t\t\treturn {\r\n\t\t\t\tdot: {\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: 'yellow',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdates: [new Date(elem.date)],\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n\treturn [...dates, ...redNotes, ...grayNotes, ...blueNotes, ...yellowNotes];\r\n}\r\n\r\nfunction doesHaveNote(arr, date) {\r\n\tlet flag = -1;\r\n\tfor (let i = 0; i < arr.length; i++) {\r\n\t\tif (arr[i].date == date) {\r\n\t\t\tflag = i;\r\n\t\t}\r\n\t}\r\n\treturn flag;\r\n}\r\n\r\nfunction onClickActiveDay() {\r\n\tif (activeDay.value) {\r\n\t\trouter.push({ name: 'NotesView' });\r\n\t}\r\n}\r\n\r\nfunction onClickRight() {\r\n\trouter.push({ name: 'SettingsView' });\r\n}\r\n\r\nfunction formatter(date) {\r\n\treturn `${date.getFullYear()}-${addZero(date.getMonth() + 1)}-${addZero(\r\n\t\tdate.getDate()\r\n\t)}`;\r\n}\r\nfunction addZero(num) {\r\n\treturn num < 9 ? `0${num}` : num;\r\n}\r\n</script>\r\n<style scoped>\r\n.van-nav-bar {\r\n\tbackground: transparent;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}